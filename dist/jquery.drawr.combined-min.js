!function(t){t.fn.drawr=function(e,a){var r=this;if(r.distance_between=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},r.angle_between=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},r.hex_to_rgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},r.get_mouse_data=function(e,a){if(void 0!==a)var r=parseInt(window.getComputedStyle(a,null).getPropertyValue("border-top-width")),o=parseInt(window.getComputedStyle(a,null).getPropertyValue("border-left-width")),i={left:a.offsetLeft-t(a).scrollLeft()+o,top:a.offsetTop-t(a).scrollTop()+r};else i={left:0,top:0};if("touchmove"==e.type||"touchstart"==e.type){var s=void 0!==e.originalEvent.touches[0].force?e.originalEvent.touches[0].force:1;return void 0!==e.originalEvent.touches[0].touchType&&"stylus"==e.originalEvent.touches[0].touchType?this.pen_pressure=!0:this.pen_pressure=!1,0==s&&0==this.pen_pressure&&(s=1),{x:(e.originalEvent.touches[0].pageX-i.left)/this.zoomFactor,y:(e.originalEvent.touches[0].pageY-i.top)/this.zoomFactor,pressure:s}}return{x:(e.pageX-i.left)/this.zoomFactor,y:(e.pageY-i.top)/this.zoomFactor,pressure:1}},r.scroll_bar_width=function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var a=document.createElement("div");a.style.width="100%",t.appendChild(a);var r=a.offsetWidth;return t.parentNode.removeChild(t),e-r},r.is_dragging=!1,r.bind_draw_events=function(){var e=this,a=e.getContext("2d",{alpha:e.settings.enable_tranparency});t(e).data("is_drawing",!1),t(e).data("lastx",null),t(e).data("lasty",null),t(e).parent().on("touchstart",function(t){t.preventDefault()}),t(window).on("touchstart mousedown",function(o){var i=t(e).parent()[0],s=e.offsetLeft,n=e.offsetTop,l=t(e).parent()[0].offsetWidth-parseInt(window.getComputedStyle(i,null).getPropertyValue("border-right-width"))-parseInt(window.getComputedStyle(i,null).getPropertyValue("border-left-width")),h=t(e).parent()[0].offsetHeight-parseInt(window.getComputedStyle(i,null).getPropertyValue("border-bottom-width"))-parseInt(window.getComputedStyle(i,null).getPropertyValue("border-top-width")),c=r.get_mouse_data.call(e,o);if(e.$brushToolbox.is(":visible")&&c.x*e.zoomFactor>s&&c.x*e.zoomFactor<s+l&&c.y*e.zoomFactor>n&&c.y*e.zoomFactor<n+h&&0==r.is_dragging){c=r.get_mouse_data.call(e,o,t(e).parent()[0]),t(e).data("is_drawing",!0),a.lineCap="round",a.lineJoin="round";var u=e.brushAlpha;1==e.active_brush.pressure_affects_alpha&&(u*=2*c.pressure)>1&&(u=1);var d=e.active_brush.size;1==e.active_brush.pressure_affects_size&&(d*=2*c.pressure)<1&&(d=1),t(e).data("positions",[{x:c.x,y:c.y}]),void 0!==e.active_brush.drawStart&&e.active_brush.drawStart.call(e,e.active_brush,a,c.x,c.y,d,u,o),void 0!==e.active_brush.drawSpot&&e.active_brush.drawSpot.call(e,e.active_brush,a,c.x,c.y,d,u,o)}}).on("touchmove mousemove",function(o){var i=r.get_mouse_data.call(e,o,t(e).parent()[0]);if(1==t(e).data("is_drawing")){var s=t(e).data("positions"),n={x:i.x,y:i.y},l=s[s.length-1],h=r.distance_between(l,n),c=r.angle_between(l,n),u=e.brushAlpha;1==e.active_brush.pressure_affects_alpha&&(u*=2*i.pressure)>1&&(u=1);var d=e.active_brush.size;1==e.active_brush.pressure_affects_size&&(d*=2*i.pressure)<1&&(d=1);var p=d/6;p<1&&(p=1);for(var b=p;b<h;b+=p)x=l.x+Math.sin(c)*b,y=l.y+Math.cos(c)*b,void 0!==e.active_brush.drawSpot&&e.active_brush.drawSpot.call(e,e.active_brush,a,x,y,d,u,o),s.push({x:x,y:y});t(e).data("positions",s)}i=r.get_mouse_data.call(e,o),t(".drawr-toolbox").each(function(){1==t(this).data("dragging")&&t(this).offset({top:(i.y-t(this).data("offsety"))*e.zoomFactor,left:(i.x-t(this).data("offsetx"))*e.zoomFactor})})}).on("touchend mouseup",function(o){if(1==t(e).data("is_drawing")){var i=r.get_mouse_data.call(e,o),s=e.brushAlpha;1==e.active_brush.pressure_affects_alpha&&(s*=2*i.pressure)>1&&(s=1);var n=e.active_brush.size;1==e.active_brush.pressure_affects_size&&(n*=2*i.pressure)<1&&(n=1),void 0!==e.active_brush.drawStop&&e.active_brush.drawStop.call(e,e.active_brush,a,i.x,i.y,n,s,o)}t(e).data("is_drawing",!1).data("lastx",null).data("lasty",null),t(".drawr-toolbox").data("dragging",!1),r.is_dragging||"INPUT"!==o.target.tagName&&o.preventDefault(),r.is_dragging=!1})},r.select_button=function(e){this.getContext("2d",{alpha:this.settings.enable_tranparency});this.$brushToolbox.find("button.type-brush").each(function(){t(this).removeClass("active"),t(this).css({background:"#eeeeee",color:"#000000"})}),t(e).css({background:"orange",color:"white"}),t(e).addClass("active"),r.activate_brush.call(this,t(e).data("data"))},r.activate_brush=function(t){var e=this.getContext("2d",{alpha:this.settings.enable_tranparency});void 0!==this.active_brush&&void 0!==this.active_brush.deactivate&&this.active_brush.deactivate.call(this,this.active_brush,e),this.active_brush=t,this.brushSize=void 0!==t.size?t.size:this.brushSize,this.brushAlpha=void 0!==t.alpha?t.alpha:this.brushAlpha,void 0!==this.$colorToolbox&&this.$colorToolbox.find("input:first").val(100*this.brushAlpha).trigger("input"),void 0!==this.$colorToolbox&&this.$colorToolbox.find("input:last").val(this.brushSize).trigger("input"),this.active_brush.activate.call(this,this.active_brush,e)},r.create_button=function(e,a,o,i){var s=this,n=t("<button style='float:left;display:block;margin:0px;'><i class='"+o.icon+"'></i></button>");return n.css({outline:"none","text-align":"center","padding-left":"0px","padding-right":"0px",width:"50%",background:"#eeeeee",color:"#000000",border:"0px","min-height":"40px","user-select":"none","text-align":"center","border-radius":"0px"}),void 0!==i&&n.css(i),n.addClass("type-"+a),n.data("data",o).data("type",a),n.on("mousedown touchstart",function(e){"brush"==t(this).data("type")&&r.select_button.call(s,this),"toggle"==t(this).data("type")&&(void 0===t(this).data("state")&&t(this).data("state",!1),t(this).data("state",!t(this).data("state")),1==t(this).data("state")?t(this).css({background:"orange",color:"white"}):t(this).css({background:"#eeeeee",color:"#000000"})),e.stopPropagation(),e.preventDefault()}),t(e).find(".seperator").length>0&&"action"==a?n.insertBefore(t(e).find(".seperator")):t(e).append(n),n},r.create_slider=function(e,a,r,o,i){return t(e).append('<div style="clear:both;font-weight:bold;text-align:center;padding:5px 0px 5px 0px">'+a+'</div><div style="clear:both;display: inline-block;width: 50px;height: 60px;margin-top:5px;padding: 0;"><input value="'+i+'" style="background:transparent;width: 50px;height: 50px;margin: 0;transform-origin: 25px 25px;transform: rotate(90deg);" type="range" min="'+r+'" max="'+o+'" step="1" /><span>'+i+"</span></div>"),t(e).find("input:last").on("mousedown touchstart",function(t){t.stopPropagation()}).on("input",function(e){t(this).next().text(t(this).val())}),t(e).find("input:last")},r.initialize_canvas=function(e,a){t(this).css({display:"block","background-size":"20px 20px","user-select":"none","webkit-touch-callout":"none"}),t(this).parent().css({overflow:"scroll","user-select":"none","webkit-touch-callout":"none"}),1==this.settings.enable_tranparency&&t(this).css({"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4wUIDDYyGYFdggAAAC5JREFUOMtjfPXqFQNuICoqikeWiYECMKp5ZGhm/P//Px7p169fjwbYqGZKNAMA5EEI4kUyPZcAAAAASUVORK5CYII=)"}),this.width=e,this.height=a,t(this).width(e),t(this).height(a),this.zoomFactor=1,this.brushColor={r:0,g:0,b:0},this.plugin=r,this.pen_pressure=!1,void 0!==this.$zoomToolbox&&this.$zoomToolbox.find("input").val(100).trigger("input"),t(this).parent()[0].scrollLeft=0,t(this).parent()[0].scrollTop=0;var o=this.getContext("2d",{alpha:this.settings.enable_tranparency});0==this.settings.enable_tranparency?(o.fillStyle="white",o.fillRect(0,0,e,a)):o.clearRect(0,0,e,a),(o=this.$memoryCanvas[0].getContext("2d")).fillStyle="blue",o.fillRect(0,0,e,a);var i=t(this).parent().innerWidth()-r.scroll_bar_width(),s=t(this).parent().innerHeight()-r.scroll_bar_width(),n=parseInt(window.getComputedStyle(t(this).parent()[0],null).getPropertyValue("border-top-width")),l=parseInt(window.getComputedStyle(t(this).parent()[0],null).getPropertyValue("border-left-width"));this.$memoryCanvas.css({"z-index":5,position:"absolute",width:i,height:s,top:t(this).parent().offset().top+n+"px",left:t(this).parent().offset().left+l+"px"}),this.$memoryCanvas[0].width=i,this.$memoryCanvas[0].height=s,this.$memoryCanvas.width(i),this.$memoryCanvas.height(s),window.requestAnimationFrame(r.draw_animations.bind(this))},r.draw_animations=function(){var e=this.$memoryCanvas[0].getContext("2d");e.clearRect(0,0,this.$memoryCanvas[0].width,this.$memoryCanvas[0].height),void 0!==this.effectCallback&&null!==this.effectCallback&&this.effectCallback.call(this,e,this.active_brush,t(this).parent()[0].scrollLeft,t(this).parent()[0].scrollTop,this.zoomFactor),window.requestAnimationFrame(r.draw_animations.bind(this))},r.create_toolbox=function(e,a,o){var i=document.createElement("div");return i.innerHTML="<div style='padding:5px 0px 5px 0px'>"+o+"</div>",i.className="drawr-toolbox drawr-toolbox-"+e,i.ownerCanvas=this,t(i).css({position:"absolute","z-index":6,cursor:"move",width:"80px",height:"auto",color:"#fff",padding:"2px",background:"linear-gradient(to bottom, rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%)","border-radius":"2px","box-shadow":"0px 2px 5px -2px rgba(0,0,0,0.75)","user-select":"none","font-family":"sans-serif","font-size":"12px","text-align":"center"}),t(i).insertAfter(t(this).parent()),t(i).offset(a),t(i).hide(),t(i).on("mousedown touchstart",function(e){var a=this.ownerCanvas,o=r.get_mouse_data.call(a,e,this);t(this).data("offsetx",o.x).data("offsety",o.y).data("dragging",!0),r.is_dragging=!0,e.preventDefault()}),t(i)},"export"==e){var o=this.first()[0],i=void 0===a?"image/png":a;return o.toDataURL(i)}if("button"==e){var s=t();return this.each(function(){var t=r.create_button.call(this,this.$brushToolbox[0],"action",a);s=s.add(t)}),s}return this.each(function(){var o=this;if("start"===e)t(".drawr-toolbox").hide(),t(".drawr-toolbox-brush").show(),o.$brushToolbox.find("button:first").mousedown();else if("stop"===e)o.$brushToolbox.find("button.type-toggle").each(function(){1==t(this).data("state")&&t(this).trigger("mousedown")}),t(".drawr-toolbox").hide();else if("load"===e){var i=document.createElement("img");i.crossOrigin="Anonymous",i.onload=function(){var t=o.getContext("2d",{alpha:o.settings.enable_tranparency});r.initialize_canvas.call(o,i.width,i.height),t.drawImage(i,0,0)},i.src=a}else if("destroy"===e)alert("unimplemented");else if("object"==typeof e||void 0===e){if(t(o).hasClass("active-drawr"))return!1;o.className=o.className+" active-drawr",t(o).parent().addClass("drawr-container");var s={enable_tranparency:!0,canvas_width:t(o).parent().innerWidth()-r.scroll_bar_width(),canvas_height:t(o).parent().innerHeight()-r.scroll_bar_width()};"object"==typeof e&&(s=Object.assign(s,e)),o.settings=s,o.$memoryCanvas=t("<canvas class='sfx-canvas'></canvas>"),o.$memoryCanvas.insertBefore(o),r.initialize_canvas.call(o,s.canvas_width,s.canvas_height);var n=o.getContext("2d",{alpha:s.enable_tranparency});o.$brushToolbox=r.create_toolbox.call(o,"brush",{left:t(o).parent().offset().left,top:t(o).parent().offset().top},"Brushes"),t.fn.drawr.availableBrushes.sort(function(t,e){return t.order>e.order?1:e.order>t.order?-1:0}),t.each(t.fn.drawr.availableBrushes,function(t,e){r.create_button.call(o,o.$brushToolbox[0],"brush",e)}),o.$brushToolbox.append("<div style='clear:both;border-top:2px solid #000;' class='seperator'></div>"),r.create_button.call(o,o.$brushToolbox[0],"toggle",{icon:"mdi mdi-palette-outline mdi-24px"}).on("touchstart mousedown",function(){o.$colorToolbox.toggle()}),r.create_button.call(o,o.$brushToolbox[0],"toggle",{icon:"mdi mdi-magnify mdi-24px"}).on("touchstart mousedown",function(){o.$zoomToolbox.toggle()}),o.$colorToolbox=r.create_toolbox.call(o,"color",{left:t(o).parent().offset().left+t(o).parent().innerWidth()-80,top:t(o).parent().offset().top},"Color");t.each(["#FFFFFF","#0074D9","#2ECC40","#FFDC00","#FF4136","#111111"],function(t,e){r.create_button.call(o,o.$colorToolbox[0],"color",{icon:""},{background:e}).on("touchstart mousedown",function(){o.brushColor=r.hex_to_rgb(e),void 0!==o.active_brush.activate&&o.active_brush.activate.call(o,o.active_brush,n),r.is_dragging=!1})}),r.create_slider.call(o,o.$colorToolbox,"alpha",0,100,parseInt(100*s.inital_brush_alpha)).on("input",function(){o.brushAlpha=parseFloat(this.value/100),o.active_brush.alpha=parseFloat(this.value/100),r.is_dragging=!1}),r.create_slider.call(o,o.$colorToolbox,"size",2,100,s.inital_brush_size).on("input",function(){o.brushSize=this.value,o.active_brush.size=this.value,r.is_dragging=!1}),o.$zoomToolbox=r.create_toolbox.call(o,"zoom",{left:t(o).parent().offset().left+t(o).parent().innerWidth()-80,top:t(o).parent().offset().top},"Zoom"),r.create_slider.call(o,o.$zoomToolbox,"zoom",0,400,100).on("input",function(){var e=10*Math.ceil(this.value/10);t(this).next().text(e);var a=.01*e;o.zoomFactor;o.zoomFactor=a,t(o).width(o.width*a),t(o).height(o.height*a),t(o).css({"background-size":20*a+"px "+20*a+"px "})}),r.bind_draw_events.call(o)}}),this},t.fn.drawr.register=function(e){void 0===t.fn.drawr.availableBrushes&&(t.fn.drawr.availableBrushes=[]),t.fn.drawr.availableBrushes.push(e)}}(jQuery),jQuery.fn.drawr.register({icon:"mdi mdi-spray mdi-24px",name:"airbrush",size:40,alpha:.2,order:3,pressure_affects_alpha:!0,pressure_affects_size:!1,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){e.globalCompositeOperation="source-over",e.lineWidth=o,e.globalAlpha=i},drawSpot:function(t,e,a,r,o,i,s){e.globalAlpha=i;var n=e.createRadialGradient(a,r,0,a,r,this.brushSize/2);n.addColorStop(0,"rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")"),n.addColorStop(.5,"rgba("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+",0.5)"),n.addColorStop(1,"rgba("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+",0)"),e.fillStyle=n,e.fillRect(a-this.brushSize/2,r-this.brushSize/2,this.brushSize,this.brushSize)}}),jQuery.fn.drawr.register({icon:"mdi mdi-brush mdi-24px",name:"pen",size:6,alpha:.5,order:4,pressure_affects_alpha:!0,pressure_affects_size:!0,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){e.globalCompositeOperation="source-over",e.globalAlpha=i},drawSpot:function(t,e,a,r,o,i,s){e.globalAlpha=i;var n=e.createRadialGradient(a,r,0,a,r,o/2);n.addColorStop(0,"rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")"),n.addColorStop(.5,"rgba("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+",0.5)"),n.addColorStop(1,"rgba("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+",0)"),e.fillStyle=n,e.fillRect(a-o/2,r-o/2,o,o)}}),jQuery.fn.drawr.register({icon:"mdi mdi-eraser mdi-24px",name:"eraser",size:10,alpha:.8,order:5,pressure_affects_alpha:!0,pressure_affects_size:!0,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){1==this.settings.enable_tranparency?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="source-over",e.globalAlpha=i},drawSpot:function(t,e,a,r,o,i,s){if(e.globalAlpha=i,1==this.settings.enable_tranparency){var n=e.createRadialGradient(a,r,0,a,r,o/2);n.addColorStop(0,"#000"),n.addColorStop(.5,"rgba(0,0,0,0.5)"),n.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=n,e.fillRect(a-o/2,r-o/2,o,o)}else e.fillStyle="white",e.beginPath(),e.arc(a,r,o/2,0,2*Math.PI),e.fill()}}),jQuery.fn.drawr.register({icon:"mdi mdi-eyedropper mdi-24px",name:"pen",order:6,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o){},drawSpot:function(t,e,a,r,o,i){var s=e.getImageData(a,r,1,1).data;this.brushColor={r:s[0],g:s[1],b:s[2]}}}),jQuery.fn.drawr.register({icon:"mdi mdi-square mdi-24px",name:"filledsquare",size:3,alpha:1,order:8,pressure_affects_alpha:!1,pressure_affects_size:!1,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){t.currentAlpha=i,t.startPosition={x:a,y:r},this.effectCallback=t.effectCallback,e.globalAlpha=i,e.lineWidth=o},drawStop:function(t,e,a,r,o,i,s){e.globalAlpha=i,e.lineJoin="miter",e.lineWidth=o,e.fillStyle="rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")",e.fillRect(t.startPosition.x,t.startPosition.y,t.currentPosition.x-t.startPosition.x,t.currentPosition.y-t.startPosition.y),this.effectCallback=null},drawSpot:function(t,e,a,r,o,i,s){t.currentPosition={x:a,y:r}},effectCallback:function(t,e,a,r,o){t.globalAlpha=e.currentAlpha,t.lineJoin="miter",t.fillStyle="rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")",t.fillRect(e.startPosition.x*o-a,e.startPosition.y*o-r,(e.currentPosition.x-e.startPosition.x)*o,(e.currentPosition.y-e.startPosition.y)*o)}}),jQuery.fn.drawr.register({icon:"mdi mdi-marker mdi-24px",name:"marker",size:15,alpha:.3,order:10,pressure_affects_alpha:!1,pressure_affects_size:!1,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){e.globalCompositeOperation="source-over",t.currentAlpha=i,t.startPosition={x:a,y:r},this.effectCallback=t.effectCallback},drawStop:function(t,e,a,r,o,i,s){e.globalAlpha=i,t.currentSize=o,t.currentAlpha=i,this.effectCallback=null,e.lineWidth=o,e.lineJoin=e.lineCap="round",e.strokeStyle="rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")",e.beginPath();var n=$(this).data("positions");$.each(n,function(t,a){t>0&&(e.moveTo(n[t-1].x,n[t-1].y),e.lineTo(a.x,a.y))}),e.stroke()},drawSpot:function(t,e,a,r,o,i,s){t.currentSize=o,t.currentAlpha=i,t.currentPosition={x:a,y:r}},effectCallback:function(t,e,a,r,o){t.globalAlpha=e.currentAlpha,t.lineWidth=e.currentSize*o,t.lineJoin=t.lineCap="round",t.strokeStyle="rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")",t.beginPath();var i=$(this).data("positions");$.each(i,function(e,s){e>0&&(t.moveTo(i[e-1].x*o-a,i[e-1].y*o-r),t.lineTo(s.x*o-a,s.y*o-r))}),t.stroke()}}),jQuery.fn.drawr.register({icon:"mdi mdi-cursor-move mdi-24px",name:"move",order:9,activate:function(t,e){$(this).parent().css({cursor:"move"})},deactivate:function(t,e){$(this).parent().css({cursor:"default"})},drawStart:function(t,e,a,r,o,i,s){e.globalCompositeOperation="source-over",t.dragStartX=null,t.scrollStartX=null,t.dragStartY=null,t.scrollStartY=null,"touchmove"==s.type||"touchstart"==s.type?(a=s.originalEvent.touches[0].pageX,Y=s.originalEvent.touches[0].pageY):(a=s.pageX,r=s.pageY),t.dragStartX=a,t.scrollStartX=parseInt($(this).parent()[0].scrollLeft),t.dragStartY=r,t.scrollStartY=parseInt($(this).parent()[0].scrollTop)},drawSpot:function(t,e,a,r,o,i,s){"touchmove"==s.type||"touchstart"==s.type?(a=s.originalEvent.touches[0].pageX,Y=s.originalEvent.touches[0].pageY):(a=s.pageX,r=s.pageY);var n=parseInt(-(a-t.dragStartX)),l=parseInt(-(r-t.dragStartY));$(this).parent()[0].scrollLeft=t.scrollStartX+n,$(this).parent()[0].scrollTop=t.scrollStartY+l}}),jQuery.fn.drawr.register({icon:"mdi mdi-fountain-pen-tip mdi-24px",name:"pen",size:3,alpha:1,order:2,pressure_affects_alpha:!1,pressure_affects_size:!0,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){e.globalCompositeOperation="source-over",e.globalAlpha=i},drawSpot:function(t,e,a,r,o,i,s){e.globalAlpha=i,e.fillStyle="rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")",e.beginPath(),e.arc(a,r,o/2,0,2*Math.PI),e.fill()}}),jQuery.fn.drawr.register({icon:"mdi mdi-lead-pencil mdi-24px",name:"pencil",size:5,alpha:.8,order:1,pressure_affects_alpha:!0,pressure_affects_size:!1,activate:function(t,e){var a=this;t.brushImage=new Image,t.brushImage.crossOrigin="Anonymous",t.brushImage.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=t.brushImage.width,e.height=t.brushImage.height,r.fillStyle="rgb("+a.brushColor.r+","+a.brushColor.g+","+a.brushColor.b+")",r.fillRect(0,0,e.width,e.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.brushImage,0,0),t.brushImage=e},t.brushImage.src="images/lead-pencil.png"},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){e.globalCompositeOperation="source-over",e.globalAlpha=i},drawRotatedImage:function(t,e,a,r,o,i){t.save(),t.translate(a,r);var s=360*Math.random()+1;if(t.rotate(s*Math.PI/180),e.width>=e.height)var n=e.height/(e.width/i),l=i;else l=e.width/(e.height/i),n=i;var h=-l/2,c=-n/2;t.drawImage(e,h,c,l,n),t.restore()},drawSpot:function(t,e,a,r,o,i,s){e.globalAlpha=i,t.drawRotatedImage(e,t.brushImage,a,r,0,o)}}),jQuery.fn.drawr.register({icon:"mdi mdi-vector-square mdi-24px",name:"square",size:3,alpha:1,order:7,pressure_affects_alpha:!1,pressure_affects_size:!1,activate:function(t,e){},deactivate:function(t,e){},drawStart:function(t,e,a,r,o,i,s){e.globalCompositeOperation="source-over",t.currentAlpha=i,t.currentSize=o,t.startPosition={x:a,y:r},this.effectCallback=t.effectCallback,e.globalAlpha=i},drawStop:function(t,e,a,r,o,i,s){e.globalAlpha=i,e.lineJoin="miter",e.lineWidth=o,e.strokeStyle="rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")",e.strokeRect(t.startPosition.x,t.startPosition.y,t.currentPosition.x-t.startPosition.x,t.currentPosition.y-t.startPosition.y),this.effectCallback=null},drawSpot:function(t,e,a,r,o,i,s){t.currentPosition={x:a,y:r}},effectCallback:function(t,e,a,r,o){t.globalAlpha=e.currentAlpha,t.lineWidth=e.currentSize*o,t.lineJoin="miter",t.strokeStyle="rgb("+this.brushColor.r+","+this.brushColor.g+","+this.brushColor.b+")",t.strokeRect(e.startPosition.x*o-a,e.startPosition.y*o-r,(e.currentPosition.x-e.startPosition.x)*o,(e.currentPosition.y-e.startPosition.y)*o)}});